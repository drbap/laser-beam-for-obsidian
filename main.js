/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  default: () => LaserBeamPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian2 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var LaserBeamSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Toggle laser beam").setDesc("Turn on/off laser beam").addButton((btn) => {
      btn.setButtonText("Toggle laser").setTooltip("Turn on/off laser").onClick((evt) => {
        this.plugin.toggleLaser(evt);
      });
    });
    new import_obsidian.Setting(containerEl).setName("Laser focus type").setDesc("Select laser focus type").addDropdown((sel) => {
      this.dropdownLaserType = sel;
      sel.addOption("line", "Line");
      sel.addOption("area", "Area");
      sel.onChange(async (val) => {
        this.plugin.settings.laserType = val;
        this.plugin.setLaserType(val);
        await this.plugin.saveSettings();
      }), sel.setValue(this.plugin.settings.laserType);
    }).addExtraButton((btn) => {
      btn.setIcon("rotate-ccw");
      btn.setTooltip("Restore default");
      btn.onClick(() => {
        this.dropdownLaserType.setValue(DEFAULT_SETTINGS.laserType);
        this.plugin.settings.laserType = DEFAULT_SETTINGS.laserType;
        this.plugin.setLaserType(this.plugin.settings.laserType);
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Laser intensity").setDesc("Set laser intensity").addSlider((sli) => {
      this.sliderIntensity = sli;
      let slider_val;
      if (this.plugin.settings.laserIntensity) {
        slider_val = this.plugin.settings.laserIntensity;
      } else {
        slider_val = DEFAULT_SETTINGS.laserIntensity;
      }
      sli.setDynamicTooltip();
      sli.setLimits(0.5, 3, 0.1);
      sli.setValue(slider_val);
      sli.onChange((val) => {
        this.plugin.settings.laserIntensity = val;
        this.plugin.setLaserIntensity(val);
        this.plugin.saveSettings();
      });
    }).addExtraButton((btn) => {
      btn.setIcon("rotate-ccw");
      btn.setTooltip("Restore default");
      btn.onClick(() => {
        this.sliderIntensity.setValue(DEFAULT_SETTINGS.laserIntensity);
        this.plugin.settings.laserIntensity = DEFAULT_SETTINGS.laserIntensity;
        this.plugin.setLaserIntensity(this.plugin.settings.laserIntensity);
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Laser color").setDesc("Select laser color").addDropdown((sel) => {
      this.dropdownLaserColor = sel;
      sel.addOption("blue", "Blue laser");
      sel.addOption("green", "Green laser");
      sel.addOption("orange", "Orange laser");
      sel.addOption("yellow", "Yellow laser");
      sel.addOption("red", "Red laser");
      sel.addOption("pink", "Pink laser");
      sel.addOption("purple", "Purple laser");
      sel.onChange(async (val) => {
        this.plugin.settings.laserColor = val;
        this.plugin.setLaserColor(val);
        await this.plugin.saveSettings();
      }), sel.setValue(this.plugin.settings.laserColor);
    }).addExtraButton((btn) => {
      btn.setIcon("rotate-ccw");
      btn.setTooltip("Restore default");
      btn.onClick(() => {
        this.dropdownLaserColor.setValue(DEFAULT_SETTINGS.laserColor);
        this.plugin.settings.laserColor = DEFAULT_SETTINGS.laserColor;
        this.plugin.setLaserColor(this.plugin.settings.laserColor);
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Laser area size").setDesc("Adjust laser area size").addSlider((sli) => {
      this.sliderArea = sli;
      let slider_val;
      if (this.plugin.settings.laserArea) {
        slider_val = this.plugin.settings.laserArea;
      } else {
        slider_val = DEFAULT_SETTINGS.laserArea;
      }
      sli.setDynamicTooltip();
      sli.setLimits(30, 200, 1);
      sli.setValue(slider_val);
      sli.onChange((val) => {
        this.plugin.settings.laserArea = val;
        this.plugin.setLaserArea(val);
        this.plugin.saveSettings();
      });
    }).addExtraButton((btn) => {
      btn.setIcon("rotate-ccw");
      btn.setTooltip("Restore default");
      btn.onClick(() => {
        this.sliderArea.setValue(DEFAULT_SETTINGS.laserArea);
        this.plugin.settings.laserArea = DEFAULT_SETTINGS.laserArea;
        this.plugin.setLaserArea(this.plugin.settings.laserArea);
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Left margin").setDesc("Set laser left margin").addSlider((sli) => {
      this.sliderMarginLeft = sli;
      let slider_val;
      if (this.plugin.settings.laserMarginLeft) {
        slider_val = this.plugin.settings.laserMarginLeft;
      } else {
        slider_val = DEFAULT_SETTINGS.laserMarginLeft;
      }
      sli.setDynamicTooltip();
      sli.setLimits(0, 500, 1);
      sli.setValue(slider_val);
      sli.onChange((val) => {
        this.plugin.settings.laserMarginLeft = val;
        this.plugin.setLaserMargins(val, this.plugin.settings.laserMarginRight);
        this.plugin.saveSettings();
      });
    }).addExtraButton((btn) => {
      btn.setIcon("rotate-ccw");
      btn.setTooltip("Restore default");
      btn.onClick(() => {
        this.sliderMarginLeft.setValue(DEFAULT_SETTINGS.laserMarginLeft);
        this.plugin.settings.laserMarginLeft = DEFAULT_SETTINGS.laserMarginLeft;
        this.plugin.setLaserMargins(this.plugin.settings.laserMarginLeft, this.plugin.settings.laserMarginRight);
        this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Right margin").setDesc("Set laser right margin").addSlider((sli) => {
      this.sliderMarginRight = sli;
      let slider_val;
      if (this.plugin.settings.laserMarginRight) {
        slider_val = this.plugin.settings.laserMarginRight;
      } else {
        slider_val = DEFAULT_SETTINGS.laserMarginRight;
      }
      sli.setDynamicTooltip();
      sli.setLimits(0, 500, 1);
      sli.setValue(slider_val);
      sli.onChange((val) => {
        this.plugin.settings.laserMarginRight = val;
        this.plugin.setLaserMargins(this.plugin.settings.laserMarginLeft, val);
        this.plugin.saveSettings();
      });
    }).addExtraButton((btn) => {
      btn.setIcon("rotate-ccw");
      btn.setTooltip("Restore default");
      btn.onClick(() => {
        this.sliderMarginRight.setValue(DEFAULT_SETTINGS.laserMarginRight);
        this.plugin.settings.laserMarginRight = DEFAULT_SETTINGS.laserMarginRight;
        this.plugin.setLaserMargins(this.plugin.settings.laserMarginLeft, this.plugin.settings.laserMarginRight);
        this.plugin.saveSettings();
      });
    });
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  laserType: "line",
  laserColor: "blue",
  isLaserActive: false,
  laserIntensity: 1.5,
  laserArea: 82,
  laserMarginLeft: 0,
  laserMarginRight: 0
};
var LaserBeamPlugin = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.LB_ICON = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 4V2"/><path d="M15 16v-2"/><path d="M8 9h2"/><path d="M20 9h2"/><path d="M17.8 11.8 19 13"/><path d="M15 9h0"/><path d="M17.8 6.2 19 5"/><path d="m3 21 9-9"/><path d="M12.2 6.2 11 5"/></svg>';
  }
  async onload() {
    await this.loadSettings();
    this.LB_BODY = document.body;
    (0, import_obsidian2.addIcon)("wand-1", this.LB_ICON);
    if (this.settings.isLaserActive) {
      this.activateLaser();
    }
    this.addRibbonIcon("wand-1", "Laser beam", (evt) => {
      this.toggleLaser(evt);
    });
    this.addCommand({
      id: "laser-activate",
      name: "Toggle laser",
      callback: () => {
        if (this.settings.isLaserActive) {
          this.deactivateLaser();
        } else {
          this.activateLaser();
        }
      }
    });
    this.addCommand({
      id: "laser-focus",
      name: "Toggle laser focus type",
      callback: () => {
        if (this.settings.laserType === "line") {
          this.settings.laserType = "area";
          this.setLaserType(this.settings.laserType);
          this.saveSettings();
        } else {
          this.settings.laserType = "line";
          this.setLaserType(this.settings.laserType);
          this.saveSettings();
        }
      }
    });
    this.addSettingTab(new LaserBeamSettingTab(this.app, this));
    this.registerDomEvent(document, "mousemove", this.throttle((evt) => {
      if (this.settings.isLaserActive) {
        this.setLaserPos(evt);
      }
    }, 100));
  }
  throttle(fn, delay) {
    let isWaiting = false;
    return (evt) => {
      if (!isWaiting) {
        fn(evt);
        isWaiting = true;
        setTimeout(() => {
          isWaiting = false;
        }, delay);
      }
    };
  }
  toggleLaser(evt) {
    if (this.settings.isLaserActive) {
      this.deactivateLaser();
    } else {
      this.setLaserPos(evt);
      this.activateLaser();
    }
  }
  activateLaser() {
    this.LB_BODY.classList.add("lb-laser-active");
    this.setLaserType(this.settings.laserType);
    this.setLaserColor(this.settings.laserColor);
    this.setLaserIntensity(this.settings.laserIntensity);
    this.setLaserArea(this.settings.laserArea);
    this.setLaserMargins(this.settings.laserMarginLeft, this.settings.laserMarginRight);
    this.settings.isLaserActive = true;
    this.saveSettings();
  }
  deactivateLaser() {
    this.LB_BODY.classList.remove("lb-laser-active");
    this.settings.isLaserActive = false;
    this.saveSettings();
  }
  setLaserType(val) {
    ["lb-laser-type-line", "lb-laser-type-area"].map((c) => {
      this.LB_BODY.classList.remove(c);
    });
    switch (val) {
      case "line":
        this.LB_BODY.classList.add("lb-laser-type-line");
        break;
      case "area":
        this.LB_BODY.classList.add("lb-laser-type-area");
        break;
      default:
        this.LB_BODY.classList.add("lb-laser-type-line");
    }
  }
  setLaserColor(val) {
    ["lb-laser-blue", "lb-laser-green", "lb-laser-orange", "lb-laser-yellow", "lb-laser-red", "lb-laser-pink", "lb-laser-purple"].map((c) => this.LB_BODY.classList.remove(c));
    switch (val) {
      case "blue":
        this.LB_BODY.classList.add("lb-laser-blue");
        break;
      case "green":
        this.LB_BODY.classList.add("lb-laser-green");
        break;
      case "orange":
        this.LB_BODY.classList.add("lb-laser-orange");
        break;
      case "yellow":
        this.LB_BODY.classList.add("lb-laser-yellow");
        break;
      case "red":
        this.LB_BODY.classList.add("lb-laser-red");
        break;
      case "pink":
        this.LB_BODY.classList.add("lb-laser-pink");
        break;
      case "purple":
        this.LB_BODY.classList.add("lb-laser-purple");
        break;
      default:
        this.LB_BODY.classList.add("lb-laser-blue");
    }
  }
  setLaserPos(evt) {
    let LaserBeamPos;
    if (this.settings.laserType === "line") {
      LaserBeamPos = evt.clientY + 16;
    } else {
      LaserBeamPos = evt.clientY - this.settings.laserArea / 2;
    }
    this.LB_BODY.style.setProperty("--lb-laser-top", LaserBeamPos.toString() + "px");
  }
  setLaserArea(val) {
    if (val >= 30 && val <= 200) {
      this.LB_BODY.style.setProperty("--lb-laser-area", val.toString() + "px");
    }
  }
  setLaserIntensity(val) {
    if (val >= 0 && val <= 3) {
      this.LB_BODY.style.setProperty("--lb-laser-intensity", val.toString());
    }
  }
  setLaserMargins(val1, val2) {
    if (val1 >= 0 && val1 <= 500) {
      this.LB_BODY.style.setProperty("--lb-laser-margin-left", val1.toString() + "px");
    }
    if (val2 >= 0 && val2 <= 500) {
      this.LB_BODY.style.setProperty("--lb-laser-margin-right", val2.toString() + "px");
    }
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBJY29uTmFtZSwgUGx1Z2luLCBhZGRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgTGFzZXJCZWFtU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xuXG5pbnRlcmZhY2UgTGFzZXJCZWFtU2V0dGluZ3Mge1xuXHRsYXNlclR5cGU6IHN0cmluZztcblx0bGFzZXJDb2xvcjogc3RyaW5nO1xuXHRpc0xhc2VyQWN0aXZlOiBib29sZWFuO1xuXHRsYXNlckludGVuc2l0eTogbnVtYmVyO1xuXHRsYXNlckFyZWE6IG51bWJlcjtcblx0bGFzZXJNYXJnaW5MZWZ0OiBudW1iZXI7XG5cdGxhc2VyTWFyZ2luUmlnaHQ6IG51bWJlcjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IExhc2VyQmVhbVNldHRpbmdzID0ge1xuXHRsYXNlclR5cGU6ICdsaW5lJyxcblx0bGFzZXJDb2xvcjogJ2JsdWUnLFxuXHRpc0xhc2VyQWN0aXZlOiBmYWxzZSxcblx0bGFzZXJJbnRlbnNpdHk6IDEuNSxcblx0bGFzZXJBcmVhOiA4Mixcblx0bGFzZXJNYXJnaW5MZWZ0OiAwLFxuXHRsYXNlck1hcmdpblJpZ2h0OiAwXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExhc2VyQmVhbVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBMYXNlckJlYW1TZXR0aW5ncztcblx0cHVibGljIExCX0lDT046IEljb25OYW1lID0gJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwibm9uZVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBkPVwiTTE1IDRWMlwiLz48cGF0aCBkPVwiTTE1IDE2di0yXCIvPjxwYXRoIGQ9XCJNOCA5aDJcIi8+PHBhdGggZD1cIk0yMCA5aDJcIi8+PHBhdGggZD1cIk0xNy44IDExLjggMTkgMTNcIi8+PHBhdGggZD1cIk0xNSA5aDBcIi8+PHBhdGggZD1cIk0xNy44IDYuMiAxOSA1XCIvPjxwYXRoIGQ9XCJtMyAyMSA5LTlcIi8+PHBhdGggZD1cIk0xMi4yIDYuMiAxMSA1XCIvPjwvc3ZnPic7XG5cdHByaXZhdGUgTEJfQk9EWTogSFRNTEVsZW1lbnQ7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblx0XHR0aGlzLkxCX0JPRFkgPSBkb2N1bWVudC5ib2R5O1xuXHRcdGFkZEljb24oJ3dhbmQtMScsIHRoaXMuTEJfSUNPTik7XG5cblx0XHRpZiAodGhpcy5zZXR0aW5ncy5pc0xhc2VyQWN0aXZlKSB7XG5cdFx0XHR0aGlzLmFjdGl2YXRlTGFzZXIoKTtcblx0XHR9XG5cblx0XHR0aGlzLmFkZFJpYmJvbkljb24oJ3dhbmQtMScsICdMYXNlciBiZWFtJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXG5cdFx0XHR0aGlzLnRvZ2dsZUxhc2VyKGV2dCk7XG5cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2xhc2VyLWFjdGl2YXRlJyxcblx0XHRcdG5hbWU6ICdUb2dnbGUgbGFzZXInLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaXNMYXNlckFjdGl2ZSkge1xuXHRcdFx0XHRcdHRoaXMuZGVhY3RpdmF0ZUxhc2VyKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5hY3RpdmF0ZUxhc2VyKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2xhc2VyLWZvY3VzJyxcblx0XHRcdG5hbWU6ICdUb2dnbGUgbGFzZXIgZm9jdXMgdHlwZScsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5sYXNlclR5cGUgPT09ICdsaW5lJykge1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MubGFzZXJUeXBlID0gJ2FyZWEnO1xuXHRcdFx0XHRcdHRoaXMuc2V0TGFzZXJUeXBlKHRoaXMuc2V0dGluZ3MubGFzZXJUeXBlKTtcblx0XHRcdFx0XHR0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3MubGFzZXJUeXBlID0gJ2xpbmUnO1xuXHRcdFx0XHRcdHRoaXMuc2V0TGFzZXJUeXBlKHRoaXMuc2V0dGluZ3MubGFzZXJUeXBlKTtcblx0XHRcdFx0XHR0aGlzLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IExhc2VyQmVhbVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ21vdXNlbW92ZScsIHRoaXMudGhyb3R0bGUoKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaXNMYXNlckFjdGl2ZSkge1xuXHRcdFx0XHR0aGlzLnNldExhc2VyUG9zKGV2dCk7XG5cdFx0XHR9XG5cdFx0fSwgMTAwKSk7XG5cblx0fVxuXG5cdHRocm90dGxlPFQ+KGZuOiAoZXZ0OiBNb3VzZUV2ZW50KSA9PiBULCBkZWxheTogbnVtYmVyKTogKGV2dDogTW91c2VFdmVudCkgPT4gdm9pZCB7XG5cdFx0bGV0IGlzV2FpdGluZyA9IGZhbHNlO1xuXG5cdFx0cmV0dXJuIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdGlmICghaXNXYWl0aW5nKSB7XG5cdFx0XHRcdGZuKGV2dCk7XG5cdFx0XHRcdGlzV2FpdGluZyA9IHRydWU7XG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdGlzV2FpdGluZyA9IGZhbHNlO1xuXHRcdFx0XHR9LCBkZWxheSk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdHRvZ2dsZUxhc2VyKGV2dDogTW91c2VFdmVudCkge1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLmlzTGFzZXJBY3RpdmUpIHtcblx0XHRcdHRoaXMuZGVhY3RpdmF0ZUxhc2VyKCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuc2V0TGFzZXJQb3MoZXZ0KTtcblx0XHRcdHRoaXMuYWN0aXZhdGVMYXNlcigpO1xuXHRcdH1cblx0fVxuXG5cdGFjdGl2YXRlTGFzZXIoKSB7XG5cdFx0dGhpcy5MQl9CT0RZLmNsYXNzTGlzdC5hZGQoJ2xiLWxhc2VyLWFjdGl2ZScpO1xuXHRcdHRoaXMuc2V0TGFzZXJUeXBlKHRoaXMuc2V0dGluZ3MubGFzZXJUeXBlKTtcblx0XHR0aGlzLnNldExhc2VyQ29sb3IodGhpcy5zZXR0aW5ncy5sYXNlckNvbG9yKTtcblx0XHR0aGlzLnNldExhc2VySW50ZW5zaXR5KHRoaXMuc2V0dGluZ3MubGFzZXJJbnRlbnNpdHkpO1xuXHRcdHRoaXMuc2V0TGFzZXJBcmVhKHRoaXMuc2V0dGluZ3MubGFzZXJBcmVhKTtcblx0XHR0aGlzLnNldExhc2VyTWFyZ2lucyh0aGlzLnNldHRpbmdzLmxhc2VyTWFyZ2luTGVmdCwgdGhpcy5zZXR0aW5ncy5sYXNlck1hcmdpblJpZ2h0KTtcblx0XHR0aGlzLnNldHRpbmdzLmlzTGFzZXJBY3RpdmUgPSB0cnVlO1xuXHRcdHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdH1cblxuXHRkZWFjdGl2YXRlTGFzZXIoKSB7XG5cdFx0dGhpcy5MQl9CT0RZLmNsYXNzTGlzdC5yZW1vdmUoJ2xiLWxhc2VyLWFjdGl2ZScpO1xuXHRcdHRoaXMuc2V0dGluZ3MuaXNMYXNlckFjdGl2ZSA9IGZhbHNlO1xuXHRcdHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdH1cblxuXHRzZXRMYXNlclR5cGUodmFsOiBzdHJpbmcpIHtcblx0XHRbJ2xiLWxhc2VyLXR5cGUtbGluZScsICdsYi1sYXNlci10eXBlLWFyZWEnXS5tYXAoKGM6IHN0cmluZykgPT4geyB0aGlzLkxCX0JPRFkuY2xhc3NMaXN0LnJlbW92ZShjKSB9KTtcblx0XHRzd2l0Y2ggKHZhbCkge1xuXHRcdFx0Y2FzZSAnbGluZSc6XG5cdFx0XHRcdHRoaXMuTEJfQk9EWS5jbGFzc0xpc3QuYWRkKCdsYi1sYXNlci10eXBlLWxpbmUnKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdhcmVhJzpcblx0XHRcdFx0dGhpcy5MQl9CT0RZLmNsYXNzTGlzdC5hZGQoJ2xiLWxhc2VyLXR5cGUtYXJlYScpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRoaXMuTEJfQk9EWS5jbGFzc0xpc3QuYWRkKCdsYi1sYXNlci10eXBlLWxpbmUnKTtcblx0XHR9XG5cdH1cblxuXHRzZXRMYXNlckNvbG9yKHZhbDogc3RyaW5nKSB7XG5cdFx0WydsYi1sYXNlci1ibHVlJywgJ2xiLWxhc2VyLWdyZWVuJywgJ2xiLWxhc2VyLW9yYW5nZScsICdsYi1sYXNlci15ZWxsb3cnLCAnbGItbGFzZXItcmVkJywgJ2xiLWxhc2VyLXBpbmsnLCAnbGItbGFzZXItcHVycGxlJ10ubWFwKGMgPT4gdGhpcy5MQl9CT0RZLmNsYXNzTGlzdC5yZW1vdmUoYykpO1xuXG5cdFx0c3dpdGNoICh2YWwpIHtcblx0XHRcdGNhc2UgJ2JsdWUnOlxuXHRcdFx0XHR0aGlzLkxCX0JPRFkuY2xhc3NMaXN0LmFkZCgnbGItbGFzZXItYmx1ZScpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2dyZWVuJzpcblx0XHRcdFx0dGhpcy5MQl9CT0RZLmNsYXNzTGlzdC5hZGQoJ2xiLWxhc2VyLWdyZWVuJyk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnb3JhbmdlJzpcblx0XHRcdFx0dGhpcy5MQl9CT0RZLmNsYXNzTGlzdC5hZGQoJ2xiLWxhc2VyLW9yYW5nZScpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3llbGxvdyc6XG5cdFx0XHRcdHRoaXMuTEJfQk9EWS5jbGFzc0xpc3QuYWRkKCdsYi1sYXNlci15ZWxsb3cnKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdyZWQnOlxuXHRcdFx0XHR0aGlzLkxCX0JPRFkuY2xhc3NMaXN0LmFkZCgnbGItbGFzZXItcmVkJyk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncGluayc6XG5cdFx0XHRcdHRoaXMuTEJfQk9EWS5jbGFzc0xpc3QuYWRkKCdsYi1sYXNlci1waW5rJyk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAncHVycGxlJzpcblx0XHRcdFx0dGhpcy5MQl9CT0RZLmNsYXNzTGlzdC5hZGQoJ2xiLWxhc2VyLXB1cnBsZScpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHRoaXMuTEJfQk9EWS5jbGFzc0xpc3QuYWRkKCdsYi1sYXNlci1ibHVlJyk7XG5cdFx0fVxuXHR9XG5cblx0c2V0TGFzZXJQb3MoZXZ0OiBNb3VzZUV2ZW50KTogdm9pZCB7XG5cblx0XHRsZXQgTGFzZXJCZWFtUG9zO1xuXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubGFzZXJUeXBlID09PSAnbGluZScpIHtcblx0XHRcdExhc2VyQmVhbVBvcyA9IGV2dC5jbGllbnRZICsgMTY7XG5cdFx0fSBlbHNlIHtcblx0XHRcdExhc2VyQmVhbVBvcyA9IGV2dC5jbGllbnRZIC0gdGhpcy5zZXR0aW5ncy5sYXNlckFyZWEgLyAyO1xuXHRcdH1cblxuXHRcdHRoaXMuTEJfQk9EWS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1sYi1sYXNlci10b3AnLCBMYXNlckJlYW1Qb3MudG9TdHJpbmcoKSArICdweCcpO1xuXHR9XG5cblx0c2V0TGFzZXJBcmVhKHZhbDogbnVtYmVyKSB7XG5cdFx0aWYgKHZhbCA+PSAzMCAmJiB2YWwgPD0gMjAwKSB7XG5cdFx0XHR0aGlzLkxCX0JPRFkuc3R5bGUuc2V0UHJvcGVydHkoJy0tbGItbGFzZXItYXJlYScsIHZhbC50b1N0cmluZygpICsgJ3B4Jyk7XG5cdFx0fVxuXHR9XG5cblx0c2V0TGFzZXJJbnRlbnNpdHkodmFsOiBudW1iZXIpIHtcblx0XHRpZiAodmFsID49IDAgJiYgdmFsIDw9IDMpIHtcblx0XHRcdHRoaXMuTEJfQk9EWS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1sYi1sYXNlci1pbnRlbnNpdHknLCB2YWwudG9TdHJpbmcoKSk7XG5cdFx0fVxuXHR9XG5cblx0c2V0TGFzZXJNYXJnaW5zKHZhbDE6IG51bWJlciwgdmFsMjogbnVtYmVyKSB7XG5cdFx0aWYgKHZhbDEgPj0gMCAmJiB2YWwxIDw9IDUwMCkge1xuXHRcdFx0dGhpcy5MQl9CT0RZLnN0eWxlLnNldFByb3BlcnR5KCctLWxiLWxhc2VyLW1hcmdpbi1sZWZ0JywgdmFsMS50b1N0cmluZygpICsgJ3B4Jyk7XG5cdFx0fVxuXHRcdGlmICh2YWwyID49IDAgJiYgdmFsMiA8PSA1MDApIHtcblx0XHRcdHRoaXMuTEJfQk9EWS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1sYi1sYXNlci1tYXJnaW4tcmlnaHQnLCB2YWwyLnRvU3RyaW5nKCkgKyAncHgnKTtcblx0XHR9XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblxuXHR9XG5cblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKFxuXHRcdFx0e30sXG5cdFx0XHRERUZBVUxUX1NFVFRJTkdTLFxuXHRcdFx0YXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cbiIsICJpbXBvcnQgeyBBcHAsIERyb3Bkb3duQ29tcG9uZW50LCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBTbGlkZXJDb21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgTGFzZXJCZWFtUGx1Z2luIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9tYWluJztcblxuZXhwb3J0IGNsYXNzIExhc2VyQmVhbVNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwbHVnaW46IExhc2VyQmVhbVBsdWdpbjtcbiAgICBkcm9wZG93bkxhc2VyVHlwZTogRHJvcGRvd25Db21wb25lbnQ7XG4gICAgZHJvcGRvd25MYXNlckNvbG9yOiBEcm9wZG93bkNvbXBvbmVudDtcbiAgICBzbGlkZXJJbnRlbnNpdHk6IFNsaWRlckNvbXBvbmVudDtcbiAgICBzbGlkZXJNYXJnaW5MZWZ0OiBTbGlkZXJDb21wb25lbnQ7XG4gICAgc2xpZGVyTWFyZ2luUmlnaHQ6IFNsaWRlckNvbXBvbmVudDtcbiAgICBzbGlkZXJBcmVhOiBTbGlkZXJDb21wb25lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBMYXNlckJlYW1QbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnVG9nZ2xlIGxhc2VyIGJlYW0nKVxuICAgICAgICAgICAgLnNldERlc2MoJ1R1cm4gb24vb2ZmIGxhc2VyIGJlYW0nKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PiB7XG4gICAgICAgICAgICAgICAgYnRuLnNldEJ1dHRvblRleHQoXCJUb2dnbGUgbGFzZXJcIilcbiAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoXCJUdXJuIG9uL29mZiBsYXNlclwiKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi50b2dnbGVMYXNlcihldnQpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTGFzZXIgZm9jdXMgdHlwZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2VsZWN0IGxhc2VyIGZvY3VzIHR5cGUnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKHNlbCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wZG93bkxhc2VyVHlwZSA9IHNlbDtcbiAgICAgICAgICAgICAgICBzZWwuYWRkT3B0aW9uKCdsaW5lJywgJ0xpbmUnKTtcbiAgICAgICAgICAgICAgICBzZWwuYWRkT3B0aW9uKCdhcmVhJywgJ0FyZWEnKTtcbiAgICAgICAgICAgICAgICBzZWwub25DaGFuZ2UoYXN5bmMgKHZhbDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyVHlwZSA9IHZhbDtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXRMYXNlclR5cGUodmFsKTtcblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgc2VsLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyVHlwZSk7XG4gICAgICAgICAgICB9KS5hZGRFeHRyYUJ1dHRvbigoYnRuKSA9PiB7XG4gICAgICAgICAgICAgICAgYnRuLnNldEljb24oXCJyb3RhdGUtY2N3XCIpO1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRUb29sdGlwKFwiUmVzdG9yZSBkZWZhdWx0XCIpXG4gICAgICAgICAgICAgICAgYnRuLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duTGFzZXJUeXBlLnNldFZhbHVlKERFRkFVTFRfU0VUVElOR1MubGFzZXJUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJUeXBlID0gREVGQVVMVF9TRVRUSU5HUy5sYXNlclR5cGU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldExhc2VyVHlwZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlclR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0xhc2VyIGludGVuc2l0eScpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IGxhc2VyIGludGVuc2l0eScpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKChzbGkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlckludGVuc2l0eSA9IHNsaTtcbiAgICAgICAgICAgICAgICBsZXQgc2xpZGVyX3ZhbDogbnVtYmVyO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlckludGVuc2l0eSkge1xuICAgICAgICAgICAgICAgICAgICBzbGlkZXJfdmFsID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJJbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyX3ZhbCA9IERFRkFVTFRfU0VUVElOR1MubGFzZXJJbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNsaS5zZXREeW5hbWljVG9vbHRpcCgpO1xuICAgICAgICAgICAgICAgIHNsaS5zZXRMaW1pdHMoMC41LCAzLCAwLjEpO1xuICAgICAgICAgICAgICAgIHNsaS5zZXRWYWx1ZShzbGlkZXJfdmFsKTtcbiAgICAgICAgICAgICAgICBzbGkub25DaGFuZ2UoKHZhbDogbnVtYmVyKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJJbnRlbnNpdHkgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldExhc2VySW50ZW5zaXR5KHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KS5hZGRFeHRyYUJ1dHRvbigoYnRuKSA9PiB7XG4gICAgICAgICAgICAgICAgYnRuLnNldEljb24oXCJyb3RhdGUtY2N3XCIpO1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRUb29sdGlwKFwiUmVzdG9yZSBkZWZhdWx0XCIpXG4gICAgICAgICAgICAgICAgYnRuLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlckludGVuc2l0eS5zZXRWYWx1ZShERUZBVUxUX1NFVFRJTkdTLmxhc2VySW50ZW5zaXR5KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJJbnRlbnNpdHkgPSBERUZBVUxUX1NFVFRJTkdTLmxhc2VySW50ZW5zaXR5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXRMYXNlckludGVuc2l0eSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlckludGVuc2l0eSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdMYXNlciBjb2xvcicpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2VsZWN0IGxhc2VyIGNvbG9yJylcblxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKHNlbCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kcm9wZG93bkxhc2VyQ29sb3IgPSBzZWw7XG4gICAgICAgICAgICAgICAgc2VsLmFkZE9wdGlvbignYmx1ZScsICdCbHVlIGxhc2VyJyk7XG4gICAgICAgICAgICAgICAgc2VsLmFkZE9wdGlvbignZ3JlZW4nLCAnR3JlZW4gbGFzZXInKTtcbiAgICAgICAgICAgICAgICBzZWwuYWRkT3B0aW9uKCdvcmFuZ2UnLCAnT3JhbmdlIGxhc2VyJyk7XG4gICAgICAgICAgICAgICAgc2VsLmFkZE9wdGlvbigneWVsbG93JywgJ1llbGxvdyBsYXNlcicpO1xuICAgICAgICAgICAgICAgIHNlbC5hZGRPcHRpb24oJ3JlZCcsICdSZWQgbGFzZXInKTtcbiAgICAgICAgICAgICAgICBzZWwuYWRkT3B0aW9uKCdwaW5rJywgJ1BpbmsgbGFzZXInKTtcbiAgICAgICAgICAgICAgICBzZWwuYWRkT3B0aW9uKCdwdXJwbGUnLCAnUHVycGxlIGxhc2VyJyk7XG4gICAgICAgICAgICAgICAgc2VsLm9uQ2hhbmdlKGFzeW5jICh2YWw6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlckNvbG9yID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXRMYXNlckNvbG9yKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBzZWwuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJDb2xvcik7XG4gICAgICAgICAgICB9KS5hZGRFeHRyYUJ1dHRvbigoYnRuKSA9PiB7XG4gICAgICAgICAgICAgICAgYnRuLnNldEljb24oXCJyb3RhdGUtY2N3XCIpO1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRUb29sdGlwKFwiUmVzdG9yZSBkZWZhdWx0XCIpXG4gICAgICAgICAgICAgICAgYnRuLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duTGFzZXJDb2xvci5zZXRWYWx1ZShERUZBVUxUX1NFVFRJTkdTLmxhc2VyQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlckNvbG9yID0gREVGQVVMVF9TRVRUSU5HUy5sYXNlckNvbG9yO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXRMYXNlckNvbG9yKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyQ29sb3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0xhc2VyIGFyZWEgc2l6ZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnQWRqdXN0IGxhc2VyIGFyZWEgc2l6ZScpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKChzbGkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlckFyZWEgPSBzbGk7XG4gICAgICAgICAgICAgICAgbGV0IHNsaWRlcl92YWw6IG51bWJlcjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJBcmVhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlcl92YWwgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlckFyZWE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyX3ZhbCA9IERFRkFVTFRfU0VUVElOR1MubGFzZXJBcmVhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzbGkuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgICAgICAgICAgICBzbGkuc2V0TGltaXRzKDMwLCAyMDAsIDEpO1xuICAgICAgICAgICAgICAgIHNsaS5zZXRWYWx1ZShzbGlkZXJfdmFsKTtcbiAgICAgICAgICAgICAgICBzbGkub25DaGFuZ2UoKHZhbDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyQXJlYSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0TGFzZXJBcmVhKHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KS5hZGRFeHRyYUJ1dHRvbigoYnRuKSA9PiB7XG4gICAgICAgICAgICAgICAgYnRuLnNldEljb24oXCJyb3RhdGUtY2N3XCIpO1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRUb29sdGlwKFwiUmVzdG9yZSBkZWZhdWx0XCIpXG4gICAgICAgICAgICAgICAgYnRuLm9uQ2xpY2soKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlckFyZWEuc2V0VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5sYXNlckFyZWEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlckFyZWEgPSBERUZBVUxUX1NFVFRJTkdTLmxhc2VyQXJlYTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0TGFzZXJBcmVhKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyQXJlYSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnTGVmdCBtYXJnaW4nKVxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCBsYXNlciBsZWZ0IG1hcmdpbicpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKChzbGkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlck1hcmdpbkxlZnQgPSBzbGk7XG4gICAgICAgICAgICAgICAgbGV0IHNsaWRlcl92YWw6IG51bWJlcjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJNYXJnaW5MZWZ0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNsaWRlcl92YWwgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlck1hcmdpbkxlZnQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyX3ZhbCA9IERFRkFVTFRfU0VUVElOR1MubGFzZXJNYXJnaW5MZWZ0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzbGkuc2V0RHluYW1pY1Rvb2x0aXAoKTtcbiAgICAgICAgICAgICAgICBzbGkuc2V0TGltaXRzKDAsIDUwMCwgMSk7XG4gICAgICAgICAgICAgICAgc2xpLnNldFZhbHVlKHNsaWRlcl92YWwpO1xuICAgICAgICAgICAgICAgIHNsaS5vbkNoYW5nZSgodmFsOiBudW1iZXIpID0+IHtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlck1hcmdpbkxlZnQgPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldExhc2VyTWFyZ2lucyh2YWwsIHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyTWFyZ2luUmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSkuYWRkRXh0cmFCdXR0b24oKGJ0bikgPT4ge1xuICAgICAgICAgICAgICAgIGJ0bi5zZXRJY29uKFwicm90YXRlLWNjd1wiKTtcbiAgICAgICAgICAgICAgICBidG4uc2V0VG9vbHRpcChcIlJlc3RvcmUgZGVmYXVsdFwiKVxuICAgICAgICAgICAgICAgIGJ0bi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJNYXJnaW5MZWZ0LnNldFZhbHVlKERFRkFVTFRfU0VUVElOR1MubGFzZXJNYXJnaW5MZWZ0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJNYXJnaW5MZWZ0ID0gREVGQVVMVF9TRVRUSU5HUy5sYXNlck1hcmdpbkxlZnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldExhc2VyTWFyZ2lucyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5sYXNlck1hcmdpbkxlZnQsIHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyTWFyZ2luUmlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1JpZ2h0IG1hcmdpbicpXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IGxhc2VyIHJpZ2h0IG1hcmdpbicpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKChzbGkpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlck1hcmdpblJpZ2h0ID0gc2xpO1xuICAgICAgICAgICAgICAgIGxldCBzbGlkZXJfdmFsOiBudW1iZXI7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyTWFyZ2luUmlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyX3ZhbCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyTWFyZ2luUmlnaHQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyX3ZhbCA9IERFRkFVTFRfU0VUVElOR1MubGFzZXJNYXJnaW5SaWdodDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2xpLnNldER5bmFtaWNUb29sdGlwKCk7XG4gICAgICAgICAgICAgICAgc2xpLnNldExpbWl0cygwLCA1MDAsIDEpO1xuICAgICAgICAgICAgICAgIHNsaS5zZXRWYWx1ZShzbGlkZXJfdmFsKTtcbiAgICAgICAgICAgICAgICBzbGkub25DaGFuZ2UoKHZhbDogbnVtYmVyKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJNYXJnaW5SaWdodCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0TGFzZXJNYXJnaW5zKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyTWFyZ2luTGVmdCwgdmFsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLmFkZEV4dHJhQnV0dG9uKChidG4pID0+IHtcbiAgICAgICAgICAgICAgICBidG4uc2V0SWNvbihcInJvdGF0ZS1jY3dcIik7XG4gICAgICAgICAgICAgICAgYnRuLnNldFRvb2x0aXAoXCJSZXN0b3JlIGRlZmF1bHRcIilcbiAgICAgICAgICAgICAgICBidG4ub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVyTWFyZ2luUmlnaHQuc2V0VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5sYXNlck1hcmdpblJpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJNYXJnaW5SaWdodCA9IERFRkFVTFRfU0VUVElOR1MubGFzZXJNYXJnaW5SaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0TGFzZXJNYXJnaW5zKHRoaXMucGx1Z2luLnNldHRpbmdzLmxhc2VyTWFyZ2luTGVmdCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MubGFzZXJNYXJnaW5SaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICB9XG59XG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFBMEM7OztBQ0ExQyxzQkFBbUY7QUFJNUUsSUFBTSxzQkFBTixjQUFrQyxpQ0FBaUI7QUFBQSxFQVN0RCxZQUFZLEtBQVUsUUFBeUI7QUFDM0MsVUFBTSxLQUFLLE1BQU07QUFDakIsU0FBSyxTQUFTO0FBQUEsRUFDbEI7QUFBQSxFQUVBLFVBQWdCO0FBQ1osVUFBTSxFQUFFLFlBQVksSUFBSTtBQUV4QixnQkFBWSxNQUFNO0FBRWxCLFFBQUksd0JBQVEsV0FBVyxFQUNsQixRQUFRLG1CQUFtQixFQUMzQixRQUFRLHdCQUF3QixFQUNoQyxVQUFVLENBQUMsUUFBUTtBQUNoQixVQUFJLGNBQWMsY0FBYyxFQUMzQixXQUFXLG1CQUFtQixFQUM5QixRQUFRLENBQUMsUUFBb0I7QUFDMUIsYUFBSyxPQUFPLFlBQVksR0FBRztBQUFBLE1BQy9CLENBQUM7QUFBQSxJQUNULENBQUM7QUFFTCxRQUFJLHdCQUFRLFdBQVcsRUFDbEIsUUFBUSxrQkFBa0IsRUFDMUIsUUFBUSx5QkFBeUIsRUFDakMsWUFBWSxTQUFPO0FBQ2hCLFdBQUssb0JBQW9CO0FBQ3pCLFVBQUksVUFBVSxRQUFRLE1BQU07QUFDNUIs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LEtBQUs7QUFDSixhQUFLLFFBQVEsVUFBVSxJQUFJLGNBQWM7QUFDekM7QUFBQSxNQUNELEtBQUs7QUFDSixhQUFLLFFBQVEsVUFBVSxJQUFJLGVBQWU7QUFDMUM7QUFBQSxNQUNELEtBQUs7QUFDSixhQUFLLFFBQVEsVUFBVSxJQUFJLGlCQUFpQjtBQUM1QztBQUFBLE1BQ0Q7QUFDQyxhQUFLLFFBQVEsVUFBVSxJQUFJLGVBQWU7QUFBQSxJQUM1QztBQUFBLEVBQ0Q7QUFBQSxFQUVBLFlBQVksS0FBdUI7QUFFbEMsUUFBSTtBQUVKLFFBQUksS0FBSyxTQUFTLGNBQWMsUUFBUTtBQUN2QyxxQkFBZSxJQUFJLFVBQVU7QUFBQSxJQUM5QixPQUFPO0FBQ04scUJBQWUsSUFBSSxVQUFVLEtBQUssU0FBUyxZQUFZO0FBQUEsSUFDeEQ7QUFFQSxTQUFLLFFBQVEsTUFBTSxZQUFZLGtCQUFrQixhQUFhLFNBQVMsSUFBSSxJQUFJO0FBQUEsRUFDaEY7QUFBQSxFQUVBLGFBQWEsS0FBYTtBQUN6QixRQUFJLE9BQU8sTUFBTSxPQUFPLEtBQUs7QUFDNUIsV0FBSyxRQUFRLE1BQU0sWUFBWSxtQkFBbUIsSUFBSSxTQUFTLElBQUksSUFBSTtBQUFBLElBQ3hFO0FBQUEsRUFDRDtBQUFBLEVBRUEsa0JBQWtCLEtBQWE7QUFDOUIsUUFBSSxPQUFPLEtBQUssT0FBTyxHQUFHO0FBQ3pCLFdBQUssUUFBUSxNQUFNLFlBQVksd0JBQXdCLElBQUksU0FBUyxDQUFDO0FBQUEsSUFDdEU7QUFBQSxFQUNEO0FBQUEsRUFFQSxnQkFBZ0IsTUFBYyxNQUFjO0FBQzNDLFFBQUksUUFBUSxLQUFLLFFBQVEsS0FBSztBQUM3QixXQUFLLFFBQVEsTUFBTSxZQUFZLDBCQUEwQixLQUFLLFNBQVMsSUFBSSxJQUFJO0FBQUEsSUFDaEY7QUFDQSxRQUFJLFFBQVEsS0FBSyxRQUFRLEtBQUs7QUFDN0IsV0FBSyxRQUFRLE1BQU0sWUFBWSwyQkFBMkIsS0FBSyxTQUFTLElBQUksSUFBSTtBQUFBLElBQ2pGO0FBQUEsRUFDRDtBQUFBLEVBRUEsV0FBVztBQUFBLEVBRVg7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTztBQUFBLE1BQ3RCLENBQUM7QUFBQSxNQUNEO0FBQUEsTUFDQSxNQUFNLEtBQUssU0FBUztBQUFBLElBQUM7QUFBQSxFQUN2QjtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ3BCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ2xDO0FBQ0Q7IiwKICAibmFtZXMiOiBbImltcG9ydF9vYnNpZGlhbiJdCn0K
